<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechFlow - News</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0088cc;
            --primary-dark: #0066aa;
            --primary-light: #33a1dd;
            --bg: #ffffff;
            --bg-secondary: #f5f5f5;
            --text: #000000;
            --text-secondary: #666666;
            --border: #e0e0e0;
            --success: #31a24c;
            --danger: #e63946;
        }

        body.dark-mode {
            --bg: #0a0a0a;
            --bg-secondary: #1a1a1a;
            --text: #ffffff;
            --text-secondary: #aaaaaa;
            --border: #333333;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            padding-bottom: 20px;
        }

        /* ============ –õ–û–ì–ò–ù –≠–ö–†–ê–ù ============ */
        .login-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .login-overlay.active {
            display: flex;
        }

        .login-box {
            background: var(--bg);
            padding: 30px 20px;
            border-radius: 12px;
            width: 90%;
            max-width: 320px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            animation: popUp 0.3s ease-out;
        }

        @keyframes popUp {
            from {
                transform: scale(0.9);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .login-box h2 {
            text-align: center;
            font-size: 20px;
            margin-bottom: 8px;
            color: var(--text);
        }

        .login-box p {
            text-align: center;
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .login-form-group {
            margin-bottom: 15px;
        }

        .login-form-group label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--text);
        }

        .login-form-group input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 14px;
            background: var(--bg-secondary);
            color: var(--text);
        }

        .login-form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0,136,204,0.1);
        }

        .login-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .login-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .login-btn-primary {
            background: var(--primary);
            color: white;
        }

        .login-btn-primary:active {
            transform: scale(0.95);
        }

        .login-btn-cancel {
            background: var(--border);
            color: var(--text);
        }

        /* ============ –ü–û–ò–°–ö –ò –§–ò–õ–¨–¢–†–´ ============ */
        .search-section {
            position: sticky;
            top: 0;
            background: var(--bg);
            padding: 12px 16px;
            border-bottom: 1px solid var(--border);
            z-index: 50;
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .search-input {
            flex: 1;
            padding: 10px 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
            background: var(--bg-secondary);
            color: var(--text);
        }

        .search-input::placeholder {
            color: var(--text-secondary);
        }

        .admin-icon-btn {
            width: 36px;
            height: 36px;
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            border-radius: 6px;
            color: var(--text);
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s;
        }

        .admin-icon-btn:active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .category-filter {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding: 0 16px 12px;
            margin-bottom: 0;
        }

        .category-filter::-webkit-scrollbar {
            height: 3px;
        }

        .category-filter::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 3px;
        }

        .category-btn {
            padding: 6px 14px;
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            color: var(--text);
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
            font-weight: 500;
        }

        .category-btn:active {
            border-color: var(--primary);
            background: var(--primary);
            color: white;
        }

        .category-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* ============ –ù–û–í–û–°–¢–ò (–ö–ê–†–¢–û–ß–ö–ò) ============ */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 0 8px;
        }

        .news-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding: 12px 0;
        }

        .news-card {
            background: var(--bg-secondary);
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid var(--border);
            display: flex;
            gap: 12px;
            padding: 10px;
        }

        .news-card:active {
            transform: scale(0.98);
            background: var(--border);
        }

        .news-image {
            width: 80px;
            height: 80px;
            min-width: 80px;
            object-fit: cover;
            border-radius: 6px;
            background: var(--bg);
        }

        .news-body {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .news-category {
            display: inline-block;
            background: rgba(0, 136, 204, 0.15);
            color: var(--primary);
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 4px;
            width: fit-content;
        }

        .news-title {
            font-size: 14px;
            font-weight: 600;
            line-height: 1.3;
            margin-bottom: 4px;
            color: var(--text);
        }

        .news-meta {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* ============ –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û ============ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-overlay.active {
            display: block;
        }

        .modal {
            background: var(--bg);
            margin-top: auto;
            border-radius: 12px 12px 0 0;
            max-height: 85vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                transform: translateY(100%);
            }
            to {
                transform: translateY(0);
            }
        }

        .modal-header {
            position: sticky;
            top: 0;
            background: var(--bg);
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            z-index: 10;
        }

        .modal-header h2 {
            font-size: 16px;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text);
        }

        .modal-body {
            padding: 16px;
        }

        .modal-image {
            width: 100%;
            border-radius: 8px;
            margin-bottom: 12px;
            max-height: 250px;
            object-fit: cover;
        }

        .modal-meta {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
            flex-wrap: wrap;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .modal-text {
            line-height: 1.5;
            font-size: 14px;
            margin-bottom: 16px;
            color: var(--text);
        }

        .share-section {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        .share-title {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--text-secondary);
        }

        .share-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .share-btn {
            flex: 1;
            min-width: 100px;
            padding: 10px 12px;
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            color: var(--text);
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            font-weight: 500;
        }

        .share-btn:active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: scale(0.95);
        }

        /* ============ –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ (–ú–û–ë–ò–õ–¨–ù–ê–Ø –í–ï–†–°–ò–Ø) ============ */
        .admin-view {
            display: none;
        }

        .admin-view.active {
            display: block;
        }

        .admin-header {
            background: var(--primary);
            color: white;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 40;
        }

        .admin-header h2 {
            font-size: 18px;
            margin-bottom: 4px;
        }

        .admin-header p {
            font-size: 12px;
            opacity: 0.9;
        }

        .logout-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid white;
            color: white;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
        }

        .logout-btn:active {
            background: rgba(255,255,255,0.3);
        }

        .admin-tabs {
            display: flex;
            gap: 8px;
            padding: 12px 16px;
            overflow-x: auto;
            border-bottom: 1px solid var(--border);
            background: var(--bg);
            position: sticky;
            top: 0;
            z-index: 40;
        }

        .admin-tabs::-webkit-scrollbar {
            height: 3px;
        }

        .admin-tab-btn {
            padding: 6px 12px;
            border: 1px solid var(--border);
            background: var(--bg-secondary);
            color: var(--text);
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
        }

        .admin-tab-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .admin-content {
            padding: 16px;
        }

        .admin-form-group {
            margin-bottom: 12px;
        }

        .admin-form-group label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 6px;
            color: var(--text);
        }

        .admin-form-group input,
        .admin-form-group textarea,
        .admin-form-group select {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 13px;
            background: var(--bg-secondary);
            color: var(--text);
            font-family: inherit;
        }

        .admin-form-group textarea {
            min-height: 80px;
            resize: vertical;
        }

        .admin-form-group input:focus,
        .admin-form-group textarea:focus,
        .admin-form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0,136,204,0.1);
        }

        .admin-btn {
            width: 100%;
            padding: 10px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 10px;
            transition: all 0.2s;
        }

        .admin-btn:active {
            transform: scale(0.95);
            background: var(--primary-dark);
        }

        .admin-btn-danger {
            background: var(--danger);
        }

        .admin-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .admin-item {
            background: var(--bg-secondary);
            padding: 10px;
            border-radius: 6px;
            border: 1px solid var(--border);
            font-size: 12px;
        }

        .admin-item-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text);
        }

        .admin-item-meta {
            color: var(--text-secondary);
            font-size: 11px;
            margin-bottom: 8px;
        }

        .admin-item-actions {
            display: flex;
            gap: 6px;
        }

        .admin-item-btn {
            flex: 1;
            padding: 6px;
            font-size: 11px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            color: white;
            font-weight: 600;
        }

        .admin-item-btn-delete {
            background: var(--danger);
        }

        .admin-item-btn-delete:active {
            transform: scale(0.95);
        }

        .color-picker-wrapper {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .color-input {
            width: 50px;
            height: 40px;
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
        }

        .color-text-input {
            flex: 1;
            padding: 8px 10px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-size: 13px;
            background: var(--bg-secondary);
            color: var(--text);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
            padding: 0;
        }

        /* ============ EMPTY STATE ============ */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state p {
            font-size: 14px;
        }

        /* ============ –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ============ */
        @media (max-width: 480px) {
            .news-card {
                padding: 8px;
                gap: 10px;
            }

            .news-image {
                width: 70px;
                height: 70px;
            }

            .news-title {
                font-size: 13px;
            }

            .modal {
                max-height: 90vh;
            }

            .search-section {
                flex-wrap: wrap;
            }

            .login-box {
                width: 95%;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- –õ–û–ì–ò–ù –≠–ö–†–ê–ù -->
        <div class="login-overlay" :class="{ active: showLogin }">
            <div class="login-box">
                <h2>üîê –í—Ö–æ–¥</h2>
                <p>–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –¥–ª—è –≤—Ö–æ–¥–∞</p>
                
                <div class="login-form-group">
                    <label>–ö–æ–¥ –≤—Ö–æ–¥–∞</label>
                    <input 
                        v-model="loginCode" 
                        type="password" 
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥"
                        @keyup.enter="submitLogin"
                    >
                </div>

                <div class="login-buttons">
                    <button class="login-btn login-btn-primary" @click="submitLogin">
                        <i class="fas fa-sign-in-alt"></i> –í—Ö–æ–¥
                    </button>
                    <button class="login-btn login-btn-cancel" @click="showLogin = false">
                        –û—Ç–º–µ–Ω–∞
                    </button>
                </div>
            </div>
        </div>

        <!-- –ù–û–í–û–°–¢–ò (–æ—Å–Ω–æ–≤–Ω–æ–π –≤–∏–¥) -->
        <div v-if="!isAdmin">
            <div class="search-section">
                <input 
                    v-model="searchQuery" 
                    type="text" 
                    class="search-input" 
                    placeholder="üîç –ü–æ–∏—Å–∫..."
                >
                <button class="admin-icon-btn" @click="showLogin = true" title="–ê–¥–º–∏–Ω">
                    <i class="fas fa-lock"></i>
                </button>
            </div>

            <div class="category-filter">
                <button 
                    class="category-btn" 
                    :class="{ active: selectedCategory === null }" 
                    @click="selectedCategory = null"
                >
                    –í—Å–µ
                </button>
                <button 
                    v-for="cat in categories" 
                    :key="cat"
                    class="category-btn" 
                    :class="{ active: selectedCategory === cat }" 
                    @click="selectedCategory = cat"
                >
                    {{ cat }}
                </button>
            </div>

            <div class="container">
                <div class="news-grid" v-if="filteredNews.length > 0">
                    <div 
                        v-for="item in filteredNews" 
                        :key="item.id" 
                        class="news-card"
                        @click="openNews(item)"
                    >
                        <img :src="item.image" :alt="item.title" class="news-image">
                        <div class="news-body">
                            <div>
                                <div class="news-category">{{ item.category }}</div>
                                <h3 class="news-title">{{ item.title }}</h3>
                            </div>
                            <div class="news-meta">
                                <span>{{ item.author }}</span>
                                <span>{{ formatDate(item.date) }}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="empty-state" v-else>
                    <i class="fas fa-newspaper"></i>
                    <p>–ù–æ–≤–æ—Å—Ç–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                </div>
            </div>
        </div>

        <!-- –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ (–º–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è) -->
        <div v-if="isAdmin" class="admin-view active">
            <div class="admin-header">
                <div>
                    <h2>‚öôÔ∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
                    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç—è–º–∏</p>
                </div>
                <button class="logout-btn" @click="logout">
                    üö™ –í—ã—Ö–æ–¥
                </button>
            </div>

            <div class="admin-tabs">
                <button 
                    class="admin-tab-btn" 
                    :class="{ active: adminTab === 'news' }"
                    @click="adminTab = 'news'"
                >
                    üì∞ –ù–æ–≤–æ—Å—Ç–∏
                </button>
                <button 
                    class="admin-tab-btn" 
                    :class="{ active: adminTab === 'design' }"
                    @click="adminTab = 'design'"
                >
                    üé® –î–∏–∑–∞–π–Ω
                </button>
                <button 
                    class="admin-tab-btn" 
                    :class="{ active: adminTab === 'branding' }"
                    @click="adminTab = 'branding'"
                >
                    üè∑Ô∏è –õ–æ–≥–æ—Ç–∏–ø
                </button>
            </div>

            <div class="admin-content">
                <!-- –í–ö–õ–ê–î–ö–ê 1: –ù–û–í–û–°–¢–ò -->
                <div v-if="adminTab === 'news'">
                    <h3 style="margin-bottom: 12px;">‚ûï –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å</h3>
                    
                    <div class="admin-form-group">
                        <label>üì∞ –ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
                        <input v-model="newNewsForm.title" placeholder="–ó–∞–≥–æ–ª–æ–≤–æ–∫">
                    </div>

                    <div class="admin-form-group">
                        <label>üìù –û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <input v-model="newNewsForm.preview" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ">
                    </div>

                    <div class="admin-form-group">
                        <label>üìÑ –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç</label>
                        <textarea v-model="newNewsForm.content" placeholder="–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç"></textarea>
                    </div>

                    <div class="admin-form-group">
                        <label>üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                        <input v-model="newNewsForm.category" placeholder="AI, –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç.–¥.">
                    </div>

                    <div class="admin-form-group">
                        <label>üë§ –ê–≤—Ç–æ—Ä</label>
                        <input v-model="newNewsForm.author" placeholder="–ò–º—è –∞–≤—Ç–æ—Ä–∞">
                    </div>

                    <div class="admin-form-group">
                        <label>üîó URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</label>
                        <input v-model="newNewsForm.image" placeholder="https://example.com/image.jpg">
                    </div>

                    <div class="admin-form-group">
                        <label>üìÖ –î–∞—Ç–∞</label>
                        <input v-model="newNewsForm.date" type="date">
                    </div>

                    <button class="admin-btn" @click="addAdminNews">
                        <i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å
                    </button>

                    <h3 style="margin-top: 20px; margin-bottom: 12px;">üìã –ú–æ–∏ –Ω–æ–≤–æ—Å—Ç–∏</h3>
                    
                    <div class="admin-list">
                        <div v-for="(news, idx) in allNews" :key="idx" class="admin-item">
                            <div class="admin-item-title">{{ news.title.substring(0, 40) }}...</div>
                            <div class="admin-item-meta">
                                {{ news.category }} ‚Ä¢ {{ news.author }} ‚Ä¢ {{ news.date }}
                            </div>
                            <div class="admin-item-actions">
                                <button class="admin-item-btn admin-item-btn-delete" @click="deleteAdminNews(idx)">
                                    <i class="fas fa-trash"></i> –£–¥–∞–ª–∏—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>

                    <div v-if="allNews.length === 0" class="empty-state" style="padding: 20px; margin-top: 20px;">
                        <p>–ù–æ–≤–æ—Å—Ç–µ–π –µ—â—ë –Ω–µ—Ç</p>
                    </div>
                </div>

                <!-- –í–ö–õ–ê–î–ö–ê 2: –î–ò–ó–ê–ô–ù -->
                <div v-if="adminTab === 'design'">
                    <h3 style="margin-bottom: 12px;">üé® –¶–≤–µ—Ç–∞</h3>
                    
                    <div class="admin-form-group">
                        <label>–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç</label>
                        <div class="color-picker-wrapper">
                            <input v-model="designSettings.primaryColor" type="color" class="color-input">
                            <input v-model="designSettings.primaryColor" type="text" class="color-text-input" readonly>
                        </div>
                    </div>

                    <div class="admin-form-group">
                        <label>–¶–≤–µ—Ç —Ñ–æ–Ω–∞</label>
                        <div class="color-picker-wrapper">
                            <input v-model="designSettings.bgColor" type="color" class="color-input">
                            <input v-model="designSettings.bgColor" type="text" class="color-text-input" readonly>
                        </div>
                    </div>

                    <div class="admin-form-group">
                        <label>–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞</label>
                        <div class="color-picker-wrapper">
                            <input v-model="designSettings.textColor" type="color" class="color-input">
                            <input v-model="designSettings.textColor" type="text" class="color-text-input" readonly>
                        </div>
                    </div>

                    <button class="admin-btn" @click="saveDesignAdmin">
                        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∏–∑–∞–π–Ω
                    </button>

                    <h3 style="margin-top: 20px; margin-bottom: 12px;">üåü –≠—Ñ—Ñ–µ–∫—Ç—ã</h3>
                    
                    <div class="checkbox-group">
                        <input v-model="designSettings.darkMode" type="checkbox" id="dark-mode">
                        <label for="dark-mode" style="margin: 0; cursor: pointer;">–¢—ë–º–Ω—ã–π —Ä–µ–∂–∏–º</label>
                    </div>

                    <div class="checkbox-group">
                        <input v-model="designSettings.roundedCorners" type="checkbox" id="rounded">
                        <label for="rounded" style="margin: 0; cursor: pointer;">–°–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–µ —É–≥–ª—ã</label>
                    </div>

                    <div class="checkbox-group">
                        <input v-model="designSettings.animations" type="checkbox" id="animations">
                        <label for="animations" style="margin: 0; cursor: pointer;">–ê–Ω–∏–º–∞—Ü–∏–∏</label>
                    </div>
                </div>

                <!-- –í–ö–õ–ê–î–ö–ê 3: –õ–û–ì–û–¢–ò–ü –ò –ò–ö–û–ù–ö–ê -->
                <div v-if="adminTab === 'branding'">
                    <h3 style="margin-bottom: 12px;">üè∑Ô∏è –ë—Ä–µ–Ω–¥–∏–Ω–≥</h3>
                    
                    <div class="admin-form-group">
                        <label>üéØ Emoji –∏–∫–æ–Ω–∫–∞</label>
                        <input v-model="branding.logoIcon" placeholder="üöÄ" maxlength="5">
                    </div>

                    <div class="admin-form-group">
                        <label>üåê –ù–∞–∑–≤–∞–Ω–∏–µ —Å–∞–π—Ç–∞</label>
                        <input v-model="branding.siteName" placeholder="TechFlow News">
                    </div>

                    <div class="admin-form-group">
                        <label>üìù –û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea v-model="branding.siteDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Å–∞–π—Ç–∞"></textarea>
                    </div>

                    <div class="admin-form-group">
                        <label>üñºÔ∏è URL –ª–æ–≥–æ—Ç–∏–ø–∞ (–∫–∞—Ä—Ç–∏–Ω–∫–∞)</label>
                        <input v-model="branding.logoUrl" placeholder="https://example.com/logo.png">
                    </div>

                    <button class="admin-btn" @click="saveBrandingAdmin">
                        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>

                    <div style="margin-top: 20px; text-align: center; padding: 16px; background: var(--bg-secondary); border-radius: 6px; border: 1px solid var(--border);">
                        <div style="font-size: 40px; margin-bottom: 10px;">{{ branding.logoIcon }}</div>
                        <div style="font-size: 16px; font-weight: 600; color: var(--text);">{{ branding.siteName }}</div>
                        <div style="font-size: 12px; color: var(--text-secondary); margin-top: 8px;">{{ branding.siteDescription }}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ù–û–í–û–°–¢–ò -->
        <div class="modal-overlay" :class="{ active: selectedNews }" @click.self="selectedNews = null">
            <div class="modal" v-if="selectedNews">
                <div class="modal-header">
                    <h2>–ù–æ–≤–æ—Å—Ç—å</h2>
                    <button class="modal-close" @click="selectedNews = null">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <img :src="selectedNews.image" :alt="selectedNews.title" class="modal-image">
                    <h2 style="font-size: 16px; font-weight: 600; margin-bottom: 10px;">{{ selectedNews.title }}</h2>
                    <div class="modal-meta">
                        <span>{{ selectedNews.category }}</span>
                        <span>{{ selectedNews.author }}</span>
                        <span>{{ formatDate(selectedNews.date) }}</span>
                    </div>
                    <div class="modal-text">{{ selectedNews.content }}</div>
                    
                    <div class="share-section">
                        <div class="share-title">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è</div>
                        <div class="share-buttons">
                            <button class="share-btn" @click="shareNews">
                                <i class="fas fa-share"></i>
                                –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                            </button>
                            <button class="share-btn" @click="copyNews">
                                <i class="fas fa-copy"></i>
                                –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;

        let tg = window.Telegram.WebApp;
        tg.expand();

        const ADMIN_CODE = '1234'; // –ò–ó–ú–ï–ù–ò–¢–ï –ù–ê –°–í–û–ô –ö–û–î!

        createApp({
            setup() {
                const showLogin = ref(false);
                const loginCode = ref('');
                const isAdmin = ref(false);
                const adminTab = ref('news');

                // –ù–æ–≤–æ—Å—Ç–∏
                const news = ref([]);
                const searchQuery = ref('');
                const selectedCategory = ref(null);
                const selectedNews = ref(null);
                const allNews = ref([]);

                // –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–∏
                const newNewsForm = ref({
                    title: '',
                    preview: '',
                    content: '',
                    category: '',
                    author: '',
                    image: '',
                    date: new Date().toISOString().split('T')
                });

                // –î–∏–∑–∞–π–Ω
                const designSettings = ref({
                    primaryColor: '#0088cc',
                    bgColor: '#ffffff',
                    textColor: '#000000',
                    darkMode: false,
                    roundedCorners: true,
                    animations: true
                });

                // –ë—Ä–µ–Ω–¥–∏–Ω–≥
                const branding = ref({
                    logoIcon: 'üöÄ',
                    siteName: 'TechFlow News',
                    siteDescription: '–ù–æ–≤–æ—Å—Ç–∏ –æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö, AI –∏ —Å—Ç–∞—Ä—Ç–∞–ø–∞—Ö',
                    logoUrl: ''
                });

                // –§—É–Ω–∫—Ü–∏–∏ –ª–æ–≥–∏–Ω–∞
                const submitLogin = () => {
                    if (loginCode.value === ADMIN_CODE) {
                        isAdmin.value = true;
                        showLogin.value = false;
                        loginCode.value = '';
                    } else {
                        alert('‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥!');
                        loginCode.value = '';
                    }
                };

                const logout = () => {
                    isAdmin.value = false;
                    adminTab.value = 'news';
                };

                // –§—É–Ω–∫—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
                const loadNews = () => {
                    const stored = localStorage.getItem('techflow_news');
                    if (stored) {
                        allNews.value = JSON.parse(stored);
                        news.value = allNews.value;
                    } else {
                        fetch('https://Djoystick.github.io/techflow/data/news.json')
                            .then(r => r.json())
                            .then(data => {
                                allNews.value = data.news || data;
                                news.value = allNews.value;
                            })
                            .catch(err => console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', err));
                    }

                    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∏–∑–∞–π–Ω
                    const savedDesign = localStorage.getItem('techflow_design');
                    if (savedDesign) {
                        const design = JSON.parse(savedDesign);
                        designSettings.value = design;
                        applyDesign(design);
                    }

                    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –±—Ä–µ–Ω–¥–∏–Ω–≥
                    const savedBranding = localStorage.getItem('techflow_branding');
                    if (savedBranding) {
                        branding.value = JSON.parse(savedBranding);
                    }
                };

                const applyDesign = (design) => {
                    document.documentElement.style.setProperty('--primary', design.primaryColor);
                    document.documentElement.style.setProperty('--bg', design.bgColor);
                    document.documentElement.style.setProperty('--text', design.textColor);
                };

                const addAdminNews = () => {
                    if (!newNewsForm.value.title || !newNewsForm.value.content) {
                        alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Ç–µ–∫—Å—Ç!');
                        return;
                    }
                    allNews.value.push({
                        id: Date.now(),
                        ...newNewsForm.value
                    });
                    localStorage.setItem('techflow_news', JSON.stringify(allNews.value));
                    news.value = allNews.value;
                    resetNewsForm();
                    alert('‚úÖ –ù–æ–≤–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞!');
                };

                const deleteAdminNews = (idx) => {
                    if (confirm('–£–¥–∞–ª–∏—Ç—å –Ω–æ–≤–æ—Å—Ç—å?')) {
                        allNews.value.splice(idx, 1);
                        localStorage.setItem('techflow_news', JSON.stringify(allNews.value));
                        news.value = allNews.value;
                        alert('‚úÖ –ù–æ–≤–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–∞!');
                    }
                };

                const resetNewsForm = () => {
                    newNewsForm.value = {
                        title: '',
                        preview: '',
                        content: '',
                        category: '',
                        author: '',
                        image: '',
                        date: new Date().toISOString().split('T')
                    };
                };

                const saveDesignAdmin = () => {
                    localStorage.setItem('techflow_design', JSON.stringify(designSettings.value));
                    applyDesign(designSettings.value);
                    alert('‚úÖ –î–∏–∑–∞–π–Ω —Å–æ—Ö—Ä–∞–Ω—ë–Ω!');
                };

                const saveBrandingAdmin = () => {
                    localStorage.setItem('techflow_branding', JSON.stringify(branding.value));
                    alert('‚úÖ –ë—Ä–µ–Ω–¥–∏–Ω–≥ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!');
                };

                const categories = computed(() => {
                    return [...new Set(news.value.map(n => n.category))];
                });

                const filteredNews = computed(() => {
                    return news.value.filter(n => {
                        const matchSearch = n.title.toLowerCase().includes(searchQuery.value.toLowerCase());
                        const matchCategory = selectedCategory.value === null || n.category === selectedCategory.value;
                        return matchSearch && matchCategory;
                    });
                });

                const formatDate = (date) => {
                    return new Date(date).toLocaleDateString('ru-RU', { 
                        day: '2-digit', 
                        month: '2-digit' 
                    });
                };

                const openNews = (item) => {
                    selectedNews.value = item;
                };

                const shareNews = () => {
                    if (tg && tg.shareToChat) {
                        tg.shareToChat({
                            url: 'https://t.me/techflow_news_bot',
                            text: `–ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ: ${selectedNews.value.title}`
                        });
                    } else {
                        copyNews();
                    }
                };

                const copyNews = () => {
                    const text = `${selectedNews.value.title}\n${selectedNews.value.preview}`;
                    navigator.clipboard.writeText(text);
                    alert('‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!');
                };

                loadNews();

                return {
                    showLogin,
                    loginCode,
                    isAdmin,
                    adminTab,
                    news,
                    searchQuery,
                    selectedCategory,
                    selectedNews,
                    allNews,
                    newNewsForm,
                    designSettings,
                    branding,
                    categories,
                    filteredNews,
                    submitLogin,
                    logout,
                    addAdminNews,
                    deleteAdminNews,
                    saveDesignAdmin,
                    saveBrandingAdmin,
                    formatDate,
                    openNews,
                    shareNews,
                    copyNews
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
